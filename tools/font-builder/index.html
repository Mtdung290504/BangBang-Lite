<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Damage Font System</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&display=swap"
        rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
            font-family: 'Roboto', sans-serif;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .canvas-container {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        canvas {
            border: 2px solid #444;
            border-radius: 4px;
            background: #333;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .control-group {
            background: #2a2a2a;
            padding: 15px;
            border-radius: 8px;
        }

        .control-group h3 {
            margin: 0 0 10px 0;
            color: #4CAF50;
        }

        .input-row {
            display: flex;
            align-items: center;
            margin: 8px 0;
            gap: 10px;
        }

        .input-row label {
            flex: 1;
            font-size: 14px;
        }

        .input-row input,
        .input-row select {
            flex: 1;
            padding: 5px;
            border: 1px solid #555;
            background: #444;
            color: #fff;
            border-radius: 3px;
        }

        .color-preview {
            width: 30px;
            height: 20px;
            border: 1px solid #555;
            border-radius: 3px;
        }

        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }

        button:hover {
            background: #45a049;
        }

        .preset-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }

        .preset-buttons button {
            font-size: 12px;
            padding: 8px 12px;
            background: #666;
        }

        .preset-buttons button:hover {
            background: #777;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>üéÆ Damage Font System</h1>
        <p>H·ªá th·ªëng v·∫Ω font s√°t th∆∞∆°ng cho game v·ªõi kh·∫£ nƒÉng t√πy ch·ªânh cao</p>

        <div class="canvas-container">
            <canvas id="damageCanvas" width="800" height="400"></canvas>
        </div>

        <div class="controls">
            <div class="control-group">
                <h3>üìù N·ªôi dung</h3>
                <div class="input-row">
                    <label>Text 1:</label>
                    <input type="text" id="text1" value="157" placeholder="Nh·∫≠p text...">
                </div>
                <div class="input-row">
                    <label>Text 2:</label>
                    <input type="text" id="text2" value="89" placeholder="Nh·∫≠p text...">
                </div>
                <div class="input-row">
                    <label>Font Weight:</label>
                    <select id="fontWeight">
                        <option value="100">Thin (100)</option>
                        <option value="300">Light (300)</option>
                        <option value="400">Regular (400)</option>
                        <option value="500">Medium (500)</option>
                        <option value="700" selected>Bold (700)</option>
                        <option value="900">Black (900)</option>
                    </select>
                </div>
            </div>

            <div class="control-group">
                <h3>üé® M√†u s·∫Øc Text 1</h3>
                <div class="input-row">
                    <label>M√†u ch√≠nh:</label>
                    <input type="color" id="color1" value="#f00000">
                    <div class="color-preview" id="preview1"></div>
                </div>
                <div class="input-row">
                    <label>R:</label>
                    <input type="range" id="r1" min="0" max="255" value="240">
                    <span id="r1-val">240</span>
                </div>
                <div class="input-row">
                    <label>G:</label>
                    <input type="range" id="g1" min="0" max="255" value="0">
                    <span id="g1-val">0</span>
                </div>
                <div class="input-row">
                    <label>B:</label>
                    <input type="range" id="b1" min="0" max="255" value="0">
                    <span id="b1-val">0</span>
                </div>
            </div>

            <div class="control-group">
                <h3>üé® M√†u s·∫Øc Text 2</h3>
                <div class="input-row">
                    <label>M√†u ch√≠nh:</label>
                    <input type="color" id="color2" value="#00b400">
                    <div class="color-preview" id="preview2"></div>
                </div>
                <div class="input-row">
                    <label>R:</label>
                    <input type="range" id="r2" min="0" max="255" value="0">
                    <span id="r2-val">0</span>
                </div>
                <div class="input-row">
                    <label>G:</label>
                    <input type="range" id="g2" min="0" max="255" value="180">
                    <span id="g2-val">180</span>
                </div>
                <div class="input-row">
                    <label>B:</label>
                    <input type="range" id="b2" min="0" max="255" value="0">
                    <span id="b2-val">0</span>
                </div>
            </div>

            <div class="control-group">
                <h3>‚öôÔ∏è C·∫•u h√¨nh Font</h3>
                <div class="input-row">
                    <label>Font Size:</label>
                    <input type="range" id="fontSize" min="20" max="120" value="48">
                    <span id="fontSize-val">48px</span>
                </div>
                <div class="input-row">
                    <label>Stroke Width:</label>
                    <input type="range" id="strokeWidth" min="0" max="10" value="3" step="0.5">
                    <span id="strokeWidth-val">3px</span>
                </div>
                <div class="input-row">
                    <label>Stroke Color:</label>
                    <input type="color" id="strokeColor" value="#000000">
                </div>
                <div class="input-row">
                    <label>Spacing:</label>
                    <input type="range" id="spacing" min="50" max="300" value="150">
                    <span id="spacing-val">150px</span>
                </div>
            </div>

            <div class="control-group">
                <h3>‚ú® Hi·ªáu ·ª©ng</h3>
                <div class="input-row">
                    <label>Shadow:</label>
                    <input type="checkbox" id="enableShadow" checked>
                </div>
                <div class="input-row">
                    <label>Shadow Blur:</label>
                    <input type="range" id="shadowBlur" min="0" max="20" value="4">
                    <span id="shadowBlur-val">4px</span>
                </div>
                <div class="input-row">
                    <label>Shadow Offset X:</label>
                    <input type="range" id="shadowX" min="-10" max="10" value="2">
                    <span id="shadowX-val">2px</span>
                </div>
                <div class="input-row">
                    <label>Shadow Offset Y:</label>
                    <input type="range" id="shadowY" min="-10" max="10" value="2">
                    <span id="shadowY-val">2px</span>
                </div>
                <div class="input-row">
                    <label>Shadow Color:</label>
                    <input type="color" id="shadowColor" value="#000000">
                </div>
            </div>

            <div class="control-group">
                <h3>üéØ Presets</h3>
                <div class="preset-buttons">
                    <button onclick="applyPreset('damage')">Damage (ƒê·ªè)</button>
                    <button onclick="applyPreset('heal')">Heal (Xanh l√°)</button>
                    <button onclick="applyPreset('crit')">Critical (V√†ng)</button>
                    <button onclick="applyPreset('magic')">Magic (T√≠m)</button>
                    <button onclick="applyPreset('ice')">Ice (Xanh d∆∞∆°ng)</button>
                    <button onclick="applyPreset('fire')">Fire (Cam)</button>
                </div>
                <button onclick="exportCode()">üìã Export Code</button>
                <button onclick="downloadImage()">üíæ Download PNG</button>
            </div>
        </div>
    </div>

    <script>
        // Damage Font System Class
        class DamageFontRenderer {
            constructor(canvas) {
                this.canvas = canvas;
                this.ctx = canvas.getContext('2d');

                // Default settings
                this.settings = {
                    fontSize: 48,
                    fontWeight: '700',
                    fontFamily: 'Roboto',
                    strokeWidth: 3,
                    strokeColor: '#000000',
                    shadowEnabled: true,
                    shadowBlur: 4,
                    shadowOffsetX: 2,
                    shadowOffsetY: 2,
                    shadowColor: '#000000',
                    spacing: 150
                };
            }

            // V·∫Ω text v·ªõi vi·ªÅn v√† shadow
            drawDamageText(text, x, y, fillColor) {
                const ctx = this.ctx;

                // Set font
                ctx.font = `${this.settings.fontWeight} ${this.settings.fontSize}px ${this.settings.fontFamily}`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';

                // Shadow
                if (this.settings.shadowEnabled) {
                    ctx.save();
                    ctx.shadowColor = this.settings.shadowColor;
                    ctx.shadowBlur = this.settings.shadowBlur;
                    ctx.shadowOffsetX = this.settings.shadowOffsetX;
                    ctx.shadowOffsetY = this.settings.shadowOffsetY;

                    // V·∫Ω stroke v·ªõi shadow
                    ctx.strokeStyle = this.settings.strokeColor;
                    ctx.lineWidth = this.settings.strokeWidth;
                    ctx.strokeText(text, x, y);

                    ctx.restore();
                }

                // V·∫Ω stroke ch√≠nh (kh√¥ng shadow)
                ctx.strokeStyle = this.settings.strokeColor;
                ctx.lineWidth = this.settings.strokeWidth;
                ctx.strokeText(text, x, y);

                // V·∫Ω fill
                ctx.fillStyle = fillColor;
                ctx.fillText(text, x, y);
            }

            // Render to√†n b·ªô scene
            render(text1, color1, text2, color2) {
                // Clear canvas
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);

                const centerY = this.canvas.height / 2;
                const centerX = this.canvas.width / 2;

                // V·∫Ω 2 text
                this.drawDamageText(text1, centerX - this.settings.spacing / 2, centerY, color1);
                this.drawDamageText(text2, centerX + this.settings.spacing / 2, centerY, color2);
            }

            // Update settings
            updateSettings(newSettings) {
                Object.assign(this.settings, newSettings);
            }
        }

        // Initialize
        const canvas = document.getElementById('damageCanvas');
        const renderer = new DamageFontRenderer(canvas);

        // Helper functions
        function rgbToHex(r, g, b) {
            return "#" + [r, g, b].map(x => {
                const hex = x.toString(16);
                return hex.length === 1 ? "0" + hex : hex;
            }).join("");
        }

        function updateColorPreview(previewId, r, g, b) {
            document.getElementById(previewId).style.backgroundColor = `rgb(${r}, ${g}, ${b})`;
        }

        function updateDisplay() {
            const r1 = parseInt(document.getElementById('r1').value);
            const g1 = parseInt(document.getElementById('g1').value);
            const b1 = parseInt(document.getElementById('b1').value);

            const r2 = parseInt(document.getElementById('r2').value);
            const g2 = parseInt(document.getElementById('g2').value);
            const b2 = parseInt(document.getElementById('b2').value);

            const color1 = `rgb(${r1}, ${g1}, ${b1})`;
            const color2 = `rgb(${r2}, ${g2}, ${b2})`;

            // Update previews
            updateColorPreview('preview1', r1, g1, b1);
            updateColorPreview('preview2', r2, g2, b2);

            // Update color inputs
            document.getElementById('color1').value = rgbToHex(r1, g1, b1);
            document.getElementById('color2').value = rgbToHex(r2, g2, b2);

            // Update renderer settings
            renderer.updateSettings({
                fontSize: parseInt(document.getElementById('fontSize').value),
                fontWeight: document.getElementById('fontWeight').value,
                strokeWidth: parseFloat(document.getElementById('strokeWidth').value),
                strokeColor: document.getElementById('strokeColor').value,
                shadowEnabled: document.getElementById('enableShadow').checked,
                shadowBlur: parseInt(document.getElementById('shadowBlur').value),
                shadowOffsetX: parseInt(document.getElementById('shadowX').value),
                shadowOffsetY: parseInt(document.getElementById('shadowY').value),
                shadowColor: document.getElementById('shadowColor').value,
                spacing: parseInt(document.getElementById('spacing').value)
            });

            // Render
            const text1 = document.getElementById('text1').value || '157';
            const text2 = document.getElementById('text2').value || '89';
            renderer.render(text1, color1, text2, color2);
        }

        // Event listeners for all controls
        ['text1', 'text2', 'fontWeight', 'fontSize', 'strokeWidth', 'strokeColor',
            'r1', 'g1', 'b1', 'r2', 'g2', 'b2', 'color1', 'color2',
            'enableShadow', 'shadowBlur', 'shadowX', 'shadowY', 'shadowColor', 'spacing'].forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('input', updateDisplay);
                    element.addEventListener('change', updateDisplay);
                }
            });

        // Update value displays
        ['fontSize', 'strokeWidth', 'shadowBlur', 'shadowX', 'shadowY', 'spacing', 'r1', 'g1', 'b1', 'r2', 'g2', 'b2'].forEach(id => {
            const element = document.getElementById(id);
            const display = document.getElementById(id + '-val');
            if (element && display) {
                element.addEventListener('input', () => {
                    const unit = ['fontSize', 'strokeWidth', 'shadowBlur', 'shadowX', 'shadowY', 'spacing'].includes(id) ? 'px' : '';
                    display.textContent = element.value + unit;
                });
            }
        });

        // Color input sync
        document.getElementById('color1').addEventListener('input', (e) => {
            const color = e.target.value;
            const r = parseInt(color.substr(1, 2), 16);
            const g = parseInt(color.substr(3, 2), 16);
            const b = parseInt(color.substr(5, 2), 16);

            document.getElementById('r1').value = r;
            document.getElementById('g1').value = g;
            document.getElementById('b1').value = b;
            document.getElementById('r1-val').textContent = r;
            document.getElementById('g1-val').textContent = g;
            document.getElementById('b1-val').textContent = b;
            updateDisplay();
        });

        document.getElementById('color2').addEventListener('input', (e) => {
            const color = e.target.value;
            const r = parseInt(color.substr(1, 2), 16);
            const g = parseInt(color.substr(3, 2), 16);
            const b = parseInt(color.substr(5, 2), 16);

            document.getElementById('r2').value = r;
            document.getElementById('g2').value = g;
            document.getElementById('b2').value = b;
            document.getElementById('r2-val').textContent = r;
            document.getElementById('g2-val').textContent = g;
            document.getElementById('b2-val').textContent = b;
            updateDisplay();
        });

        // Preset functions
        function applyPreset(type) {
            const presets = {
                damage: { r1: 240, g1: 0, b1: 0, r2: 180, g2: 0, b2: 0, text1: '157', text2: '89' },
                heal: { r1: 0, g1: 255, b1: 0, r2: 0, g2: 180, b2: 0, text1: '+125', text2: '+67' },
                crit: { r1: 255, g1: 255, b1: 0, r2: 255, g2: 200, b2: 0, text1: '324!', text2: '156!' },
                magic: { r1: 165, g1: 0, b1: 255, r2: 100, g2: 0, b2: 180, text1: '89', text2: '45' },
                ice: { r1: 0, g1: 200, b1: 255, r2: 0, g2: 150, b2: 200, text1: '67', text2: '34' },
                fire: { r1: 255, g1: 100, b1: 0, r2: 200, g2: 80, b2: 0, text1: '198', text2: '123' }
            };

            const preset = presets[type];
            if (preset) {
                Object.keys(preset).forEach(key => {
                    const element = document.getElementById(key);
                    if (element) {
                        element.value = preset[key];
                        if (key.includes('r') || key.includes('g') || key.includes('b')) {
                            document.getElementById(key + '-val').textContent = preset[key];
                        }
                    }
                });
                updateDisplay();
            }
        }

        // Export functions
        function exportCode() {
            const settings = renderer.settings;
            const text1 = document.getElementById('text1').value || '157';
            const text2 = document.getElementById('text2').value || '89';
            const r1 = document.getElementById('r1').value;
            const g1 = document.getElementById('g1').value;
            const b1 = document.getElementById('b1').value;
            const r2 = document.getElementById('r2').value;
            const g2 = document.getElementById('g2').value;
            const b2 = document.getElementById('b2').value;

            const code = `
// Damage Font System - Generated Code
const damageRenderer = new DamageFontRenderer(canvas);
damageRenderer.updateSettings({
    fontSize: ${settings.fontSize},
    fontWeight: '${settings.fontWeight}',
    strokeWidth: ${settings.strokeWidth},
    strokeColor: '${settings.strokeColor}',
    shadowEnabled: ${settings.shadowEnabled},
    shadowBlur: ${settings.shadowBlur},
    shadowOffsetX: ${settings.shadowOffsetX},
    shadowOffsetY: ${settings.shadowOffsetY},
    shadowColor: '${settings.shadowColor}',
    spacing: ${settings.spacing}
});

damageRenderer.render('${text1}', 'rgb(${r1}, ${g1}, ${b1})', '${text2}', 'rgb(${r2}, ${g2}, ${b2})');
            `.trim();

            navigator.clipboard.writeText(code).then(() => {
                alert('Code ƒë√£ ƒë∆∞·ª£c copy v√†o clipboard!');
            });
        }

        function downloadImage() {
            const link = document.createElement('a');
            link.download = 'damage-font-' + Date.now() + '.png';
            link.href = canvas.toDataURL();
            link.click();
        }

        // Initial render
        updateDisplay();
    </script>
</body>

</html>